## Message types by category

### Authentication
Requests:
- [x] AbstractCentralChallengeRequest
   - [ ] Tests for AbstractCentralChallengeRequest
- [x] CentralChallengeRequest
   - [x] Tests for CentralChallengeRequest
- [x] Jpake1aRequest
   - [x] Tests for Jpake1aRequest
- [x] Jpake1bRequest
   - [x] Tests for Jpake1bRequest
- [x] Jpake2Request
   - [x] Tests for Jpake2Request
- [x] Jpake3SessionKeyRequest
   - [x] Tests for Jpake3SessionKeyRequest
- [x] Jpake4KeyConfirmationRequest
   - [x] Tests for Jpake4KeyConfirmationRequest
- [x] PumpChallengeRequest
   - [x] Tests for PumpChallengeRequest

Responses:
- [x] AbstractCentralChallengeResponse
   - [ ] Tests for AbstractCentralChallengeResponse
- [x] AbstractPumpChallengeResponse
- [x] CentralChallengeResponse
   - [x] Tests for CentralChallengeResponse
- [x] Jpake1aResponse
   - [x] Tests for Jpake1aResponse
- [x] Jpake1bResponse
   - [x] Tests for Jpake1bResponse
- [x] Jpake2Response
   - [x] Tests for Jpake2Response
- [x] Jpake3SessionKeyResponse
   - [x] Tests for Jpake3SessionKeyResponse
- [x] Jpake4KeyConfirmationResponse
   - [x] Tests for Jpake4KeyConfirmationResponse
- [x] PumpChallengeResponse
   - [x] Tests for PumpChallengeResponse

### Control
Requests:
- [x] BolusPermissionReleaseRequest
   - [x] Tests for BolusPermissionReleaseRequest
- [x] BolusPermissionRequest
   - [x] Tests for BolusPermissionRequest
- [x] CancelBolusRequest
   - [x] Tests for CancelBolusRequest
- [x] ChangeControlIQSettingsRequest
   - [x] Tests for ChangeControlIQSettingsRequest
- [x] ChangeTimeDateRequest
   - [x] Tests for ChangeTimeDateRequest
- [x] CreateIDPRequest
   - [x] Tests for CreateIDPRequest
- [x] DeleteIDPRequest
   - [x] Tests for DeleteIDPRequest
- [x] DisconnectPumpRequest
   - [x] Tests for DisconnectPumpRequest
- [x] DismissNotificationRequest
   - [x] Tests for DismissNotificationRequest
- [x] EnterChangeCartridgeModeRequest
   - [x] Tests for EnterChangeCartridgeModeRequest
- [x] EnterFillTubingModeRequest
   - [x] Tests for EnterFillTubingModeRequest
- [x] ExitChangeCartridgeModeRequest
   - [x] Tests for ExitChangeCartridgeModeRequest
- [x] ExitFillTubingModeRequest
   - [x] Tests for ExitFillTubingModeRequest
- [x] FillCannulaRequest
   - [x] Tests for FillCannulaRequest
- [x] InitiateBolusRequest
   - [x] Tests for InitiateBolusRequest
- [x] PlaySoundRequest
   - [x] Tests for PlaySoundRequest
- [x] RemoteBgEntryRequest
   - [x] Tests for RemoteBgEntryRequest
- [x] RemoteCarbEntryRequest
   - [ ] Tests for RemoteCarbEntryRequest
- [x] RenameIDPRequest
   - [ ] Tests for RenameIDPRequest
- [x] ResumePumpingRequest
   - [ ] Tests for ResumePumpingRequest
- [x] SetActiveIDPRequest
   - [ ] Tests for SetActiveIDPRequest
- [x] SetDexcomG7PairingCodeRequest
   - [ ] Tests for SetDexcomG7PairingCodeRequest
- [x] SetG6TransmitterIdRequest
   - [ ] Tests for SetG6TransmitterIdRequest
- [x] SetIDPSegmentRequest
   - [ ] Tests for SetIDPSegmentRequest
- [x] SetIDPSettingsRequest
   - [ ] Tests for SetIDPSettingsRequest
- [x] SetMaxBasalLimitRequest
   - [ ] Tests for SetMaxBasalLimitRequest
- [x] SetMaxBolusLimitRequest
   - [ ] Tests for SetMaxBolusLimitRequest
- [x] SetModesRequest
   - [ ] Tests for SetModesRequest
- [x] SetQuickBolusSettingsRequest
   - [ ] Tests for SetQuickBolusSettingsRequest
- [x] SetSleepScheduleRequest
   - [ ] Tests for SetSleepScheduleRequest
- [x] SetTempRateRequest
   - [ ] Tests for SetTempRateRequest
- [x] StartDexcomG6SensorSessionRequest
   - [ ] Tests for StartDexcomG6SensorSessionRequest
- [x] StopDexcomCGMSensorSessionRequest
   - [ ] Tests for StopDexcomCGMSensorSessionRequest
- [x] StopTempRateRequest
   - [ ] Tests for StopTempRateRequest
- [x] SuspendPumpingRequest
   - [ ] Tests for SuspendPumpingRequest

Responses:
- [x] BolusPermissionReleaseResponse
   - [x] Tests for BolusPermissionReleaseResponse
- [x] BolusPermissionResponse
   - [ ] Tests for BolusPermissionResponse
- [x] CancelBolusResponse
   - [ ] Tests for CancelBolusResponse
- [x] ChangeControlIQSettingsResponse
   - [ ] Tests for ChangeControlIQSettingsResponse
- [x] ChangeTimeDateResponse
   - [ ] Tests for ChangeTimeDateResponse
- [x] CreateIDPResponse
   - [ ] Tests for CreateIDPResponse
- [x] DeleteIDPResponse
   - [ ] Tests for DeleteIDPResponse
- [x] DisconnectPumpResponse
   - [ ] Tests for DisconnectPumpResponse
- [x] DismissNotificationResponse
   - [ ] Tests for DismissNotificationResponse
- [x] EnterChangeCartridgeModeResponse
   - [ ] Tests for EnterChangeCartridgeModeResponse
- [x] EnterFillTubingModeResponse
   - [ ] Tests for EnterFillTubingModeResponse
- [x] ExitChangeCartridgeModeResponse
   - [ ] Tests for ExitChangeCartridgeModeResponse
- [x] ExitFillTubingModeResponse
   - [ ] Tests for ExitFillTubingModeResponse
- [x] FillCannulaResponse
   - [ ] Tests for FillCannulaResponse
- [x] InitiateBolusResponse
   - [ ] Tests for InitiateBolusResponse
- [x] PlaySoundResponse
   - [ ] Tests for PlaySoundResponse
- [x] RemoteBgEntryResponse
   - [ ] Tests for RemoteBgEntryResponse
- [x] RemoteCarbEntryResponse
   - [ ] Tests for RemoteCarbEntryResponse
- [x] RenameIDPResponse
   - [ ] Tests for RenameIDPResponse
- [x] ResumePumpingResponse
   - [ ] Tests for ResumePumpingResponse
- [x] SetActiveIDPResponse
   - [ ] Tests for SetActiveIDPResponse
- [x] SetDexcomG7PairingCodeResponse
   - [ ] Tests for SetDexcomG7PairingCodeResponse
- [x] SetG6TransmitterIdResponse
   - [ ] Tests for SetG6TransmitterIdResponse
- [x] SetIDPSegmentResponse
   - [ ] Tests for SetIDPSegmentResponse
- [x] SetIDPSettingsResponse
   - [ ] Tests for SetIDPSettingsResponse
- [x] SetMaxBasalLimitResponse
   - [ ] Tests for SetMaxBasalLimitResponse
- [x] SetMaxBolusLimitResponse
   - [ ] Tests for SetMaxBolusLimitResponse
- [x] SetModesResponse
   - [ ] Tests for SetModesResponse
- [x] SetQuickBolusSettingsResponse
   - [ ] Tests for SetQuickBolusSettingsResponse
- [x] SetSleepScheduleResponse
   - [ ] Tests for SetSleepScheduleResponse
- [x] SetTempRateResponse
   - [ ] Tests for SetTempRateResponse
- [x] StartDexcomG6SensorSessionResponse
   - [ ] Tests for StartDexcomG6SensorSessionResponse
- [x] StopDexcomCGMSensorSessionResponse
   - [ ] Tests for StopDexcomCGMSensorSessionResponse
- [x] StopTempRateResponse
   - [ ] Tests for StopTempRateResponse
- [x] SuspendPumpingResponse
   - [ ] Tests for SuspendPumpingResponse

### ControlStream
Requests:
- [x] NonexistentDetectingCartridgeStateStreamRequest
   - [ ] Tests for NonexistentDetectingCartridgeStateStreamRequest
- [x] NonexistentEnterChangeCartridgeModeStateStreamRequest
   - [ ] Tests for NonexistentEnterChangeCartridgeModeStateStreamRequest
- [x] NonexistentExitFillTubingModeStateStreamRequest
   - [ ] Tests for NonexistentExitFillTubingModeStateStreamRequest
- [x] NonexistentFillCannulaStateStreamRequest
   - [ ] Tests for NonexistentFillCannulaStateStreamRequest
- [x] NonexistentFillTubingStateStreamRequest
   - [ ] Tests for NonexistentFillTubingStateStreamRequest
- [x] NonexistentPumpingStateStreamRequest

Responses:
- [x] ControlStreamMessages
- [x] DetectingCartridgeStateStreamResponse
   - [ ] Tests for DetectingCartridgeStateStreamResponse
- [x] EnterChangeCartridgeModeStateStreamResponse
   - [ ] Tests for EnterChangeCartridgeModeStateStreamResponse
- [x] ExitFillTubingModeStateStreamResponse
   - [ ] Tests for ExitFillTubingModeStateStreamResponse
- [x] FillCannulaStateStreamResponse
   - [ ] Tests for FillCannulaStateStreamResponse
- [x] FillTubingStateStreamResponse
   - [ ] Tests for FillTubingStateStreamResponse
- [x] PumpingStateStreamResponse

### CurrentStatus
Requests:
- [x] AlarmStatusRequest
   - [ ] Tests for AlarmStatusRequest
- [x] AlertStatusRequest
   - [ ] Tests for AlertStatusRequest
- [x] ApiVersionRequest
   - [x] Tests for ApiVersionRequest
- [x] BasalIQAlertInfoRequest
   - [ ] Tests for BasalIQAlertInfoRequest
- [x] BasalIQSettingsRequest
   - [ ] Tests for BasalIQSettingsRequest
- [x] BasalIQStatusRequest
   - [ ] Tests for BasalIQStatusRequest
- [x] BasalLimitSettingsRequest
   - [ ] Tests for BasalLimitSettingsRequest
- [x] BolusCalcDataSnapshotRequest
   - [ ] Tests for BolusCalcDataSnapshotRequest
- [x] BolusPermissionChangeReasonRequest
   - [ ] Tests for BolusPermissionChangeReasonRequest
- [x] CGMAlertStatusRequest
   - [ ] Tests for CGMAlertStatusRequest
- [x] CGMGlucoseAlertSettingsRequest
   - [ ] Tests for CGMGlucoseAlertSettingsRequest
- [x] CGMHardwareInfoRequest
   - [ ] Tests for CGMHardwareInfoRequest
- [x] CGMOORAlertSettingsRequest
   - [ ] Tests for CGMOORAlertSettingsRequest
- [x] CGMRateAlertSettingsRequest
   - [ ] Tests for CGMRateAlertSettingsRequest
- [x] CGMStatusRequest
   - [ ] Tests for CGMStatusRequest
- [x] CommonSoftwareInfoRequest
   - [ ] Tests for CommonSoftwareInfoRequest
- [x] ControlIQIOBRequest
   - [ ] Tests for ControlIQIOBRequest
- [x] ControlIQInfoV1Request
   - [ ] Tests for ControlIQInfoV1Request
- [x] ControlIQInfoV2Request
   - [ ] Tests for ControlIQInfoV2Request
- [x] ControlIQSleepScheduleRequest
   - [ ] Tests for ControlIQSleepScheduleRequest
- [x] CurrentBasalStatusRequest
   - [ ] Tests for CurrentBasalStatusRequest
- [x] CurrentBatteryV1Request
   - [ ] Tests for CurrentBatteryV1Request
- [x] CurrentBatteryV2Request
   - [ ] Tests for CurrentBatteryV2Request
- [x] CurrentBolusStatusRequest
   - [ ] Tests for CurrentBolusStatusRequest
- [x] CurrentEGVGuiDataRequest
   - [ ] Tests for CurrentEGVGuiDataRequest
- [x] ExtendedBolusStatusRequest
   - [ ] Tests for ExtendedBolusStatusRequest
- [x] GetG6TransmitterHardwareInfoRequest
   - [ ] Tests for GetG6TransmitterHardwareInfoRequest
- [x] GetSavedG7PairingCodeRequest
   - [ ] Tests for GetSavedG7PairingCodeRequest
- [x] GlobalMaxBolusSettingsRequest
   - [ ] Tests for GlobalMaxBolusSettingsRequest
- [x] HistoryLogRequest
   - [ ] Tests for HistoryLogRequest
- [x] HistoryLogStatusRequest
   - [ ] Tests for HistoryLogStatusRequest
- [x] HomeScreenMirrorRequest
   - [ ] Tests for HomeScreenMirrorRequest
- [x] IDPSegmentRequest
   - [ ] Tests for IDPSegmentRequest
- [x] IDPSettingsRequest
   - [ ] Tests for IDPSettingsRequest
- [x] InsulinStatusRequest
   - [ ] Tests for InsulinStatusRequest
- [x] LastBGRequest
   - [ ] Tests for LastBGRequest
- [x] LastBolusStatusRequest
   - [ ] Tests for LastBolusStatusRequest
- [x] LastBolusStatusV2Request
   - [ ] Tests for LastBolusStatusV2Request
- [x] LocalizationRequest
   - [ ] Tests for LocalizationRequest
- [x] MalfunctionStatusRequest
   - [ ] Tests for MalfunctionStatusRequest
- [x] NonControlIQIOBRequest
   - [ ] Tests for NonControlIQIOBRequest
- [x] OtherNotification2StatusRequest
   - [ ] Tests for OtherNotification2StatusRequest
- [x] OtherNotificationStatusRequest
   - [ ] Tests for OtherNotificationStatusRequest
- [x] ProfileStatusRequest
   - [ ] Tests for ProfileStatusRequest
- [x] PumpFeaturesV1Request
   - [ ] Tests for PumpFeaturesV1Request
- [x] PumpFeaturesV2Request
   - [ ] Tests for PumpFeaturesV2Request
- [x] PumpGlobalsRequest
   - [ ] Tests for PumpGlobalsRequest
- [x] PumpSettingsRequest
   - [ ] Tests for PumpSettingsRequest
- [x] PumpVersionRequest
   - [ ] Tests for PumpVersionRequest
- [x] ReminderStatusRequest
   - [ ] Tests for ReminderStatusRequest
- [x] RemindersRequest
   - [ ] Tests for RemindersRequest
- [x] TempRateRequest
   - [ ] Tests for TempRateRequest
- [x] TimeSinceResetRequest
   - [ ] Tests for TimeSinceResetRequest
- [x] UnknownMobiOpcode110Request
   - [ ] Tests for UnknownMobiOpcode110Request
- [x] UnknownMobiOpcode20Request
   - [ ] Tests for UnknownMobiOpcode20Request
- [x] UnknownMobiOpcode30Request
   - [ ] Tests for UnknownMobiOpcode30Request
- [x] UnknownMobiOpcodeNeg124Request
   - [ ] Tests for UnknownMobiOpcodeNeg124Request
- [x] UnknownMobiOpcodeNeg66Request
   - [ ] Tests for UnknownMobiOpcodeNeg66Request
- [x] UnknownMobiOpcodeNeg70Request
   - [ ] Tests for UnknownMobiOpcodeNeg70Request

Responses:
- [x] AlarmStatusResponse
   - [ ] Tests for AlarmStatusResponse
- [x] AlertStatusResponse
   - [ ] Tests for AlertStatusResponse
- [x] ApiVersionResponse
   - [ ] Tests for ApiVersionResponse
- [x] BasalIQAlertInfoResponse
   - [ ] Tests for BasalIQAlertInfoResponse
- [x] BasalIQSettingsResponse
   - [ ] Tests for BasalIQSettingsResponse
- [x] BasalIQStatusResponse
   - [ ] Tests for BasalIQStatusResponse
- [x] BasalLimitSettingsResponse
   - [ ] Tests for BasalLimitSettingsResponse
- [x] BolusCalcDataSnapshotResponse
   - [ ] Tests for BolusCalcDataSnapshotResponse
- [x] BolusPermissionChangeReasonResponse
   - [ ] Tests for BolusPermissionChangeReasonResponse
- [x] CGMAlertStatusResponse
   - [ ] Tests for CGMAlertStatusResponse
- [x] CGMGlucoseAlertSettingsResponse
   - [ ] Tests for CGMGlucoseAlertSettingsResponse
- [x] CGMHardwareInfoResponse
   - [ ] Tests for CGMHardwareInfoResponse
- [x] CGMOORAlertSettingsResponse
   - [ ] Tests for CGMOORAlertSettingsResponse
- [x] CGMRateAlertSettingsResponse
   - [ ] Tests for CGMRateAlertSettingsResponse
- [x] CGMStatusResponse
   - [ ] Tests for CGMStatusResponse
- [x] CommonSoftwareInfoResponse
   - [ ] Tests for CommonSoftwareInfoResponse
- [x] ControlIQIOBResponse
   - [ ] Tests for ControlIQIOBResponse
- [x] ControlIQInfoAbstractResponse
   - [ ] Tests for ControlIQInfoAbstractResponse
- [x] ControlIQInfoV1Response
   - [ ] Tests for ControlIQInfoV1Response
- [x] ControlIQInfoV2Response
   - [ ] Tests for ControlIQInfoV2Response
- [x] ControlIQSleepScheduleResponse
   - [ ] Tests for ControlIQSleepScheduleResponse
- [x] CurrentBasalStatusResponse
   - [ ] Tests for CurrentBasalStatusResponse
- [x] CurrentBatteryAbstractResponse
- [x] CurrentBatteryV1Response
   - [ ] Tests for CurrentBatteryV1Response
- [x] CurrentBatteryV2Response
   - [ ] Tests for CurrentBatteryV2Response
- [x] CurrentBolusStatusResponse
   - [ ] Tests for CurrentBolusStatusResponse
- [x] CurrentEGVGuiDataResponse
   - [ ] Tests for CurrentEGVGuiDataResponse
- [x] ExtendedBolusStatusResponse
   - [ ] Tests for ExtendedBolusStatusResponse
- [x] GetG6TransmitterHardwareInfoResponse
   - [ ] Tests for GetG6TransmitterHardwareInfoResponse
- [x] GetSavedG7PairingCodeResponse
   - [ ] Tests for GetSavedG7PairingCodeResponse
- [x] GlobalMaxBolusSettingsResponse
   - [ ] Tests for GlobalMaxBolusSettingsResponse
- [x] HistoryLogResponse
   - [ ] Tests for HistoryLogResponse
- [x] HistoryLogStatusResponse
   - [ ] Tests for HistoryLogStatusResponse
- [x] HomeScreenMirrorResponse
   - [ ] Tests for HomeScreenMirrorResponse
- [x] IDPSegmentResponse
   - [ ] Tests for IDPSegmentResponse
- [x] IDPSettingsResponse
   - [ ] Tests for IDPSettingsResponse
- [x] InsulinStatusResponse
   - [ ] Tests for InsulinStatusResponse
- [x] LastBGResponse
   - [ ] Tests for LastBGResponse
- [x] LastBolusStatusAbstractResponse
- [x] LastBolusStatusResponse
   - [ ] Tests for LastBolusStatusResponse
- [x] LastBolusStatusV2Response
   - [ ] Tests for LastBolusStatusV2Response
- [x] LocalizationResponse
   - [ ] Tests for LocalizationResponse
- [x] MalfunctionStatusResponse
   - [ ] Tests for MalfunctionStatusResponse
- [x] NonControlIQIOBResponse
   - [ ] Tests for NonControlIQIOBResponse
- [x] OtherNotification2StatusResponse
   - [ ] Tests for OtherNotification2StatusResponse
- [x] OtherNotificationStatusResponse
   - [ ] Tests for OtherNotificationStatusResponse
- [x] ProfileStatusResponse
   - [ ] Tests for ProfileStatusResponse
- [x] PumpFeaturesAbstractResponse
   - [ ] Tests for PumpFeaturesAbstractResponse
- [x] PumpFeaturesV1Response
   - [ ] Tests for PumpFeaturesV1Response
- [x] PumpFeaturesV2Response
   - [ ] Tests for PumpFeaturesV2Response
- [x] PumpGlobalsResponse
   - [ ] Tests for PumpGlobalsResponse
- [x] PumpSettingsResponse
   - [ ] Tests for PumpSettingsResponse
- [x] PumpVersionResponse
   - [ ] Tests for PumpVersionResponse
- [x] ReminderStatusResponse
   - [ ] Tests for ReminderStatusResponse
- [x] RemindersResponse
   - [ ] Tests for RemindersResponse
- [x] TempRateResponse
   - [ ] Tests for TempRateResponse
- [x] TimeSinceResetResponse
   - [ ] Tests for TimeSinceResetResponse
- [x] UnknownMobiOpcode110Response
   - [ ] Tests for UnknownMobiOpcode110Response
- [x] UnknownMobiOpcode20Response
   - [ ] Tests for UnknownMobiOpcode20Response
- [x] UnknownMobiOpcode30Response
   - [ ] Tests for UnknownMobiOpcode30Response
- [x] UnknownMobiOpcodeNeg124Response
   - [ ] Tests for UnknownMobiOpcodeNeg124Response
- [x] UnknownMobiOpcodeNeg66Response
   - [ ] Tests for UnknownMobiOpcodeNeg66Response
- [x] UnknownMobiOpcodeNeg70Response
   - [ ] Tests for UnknownMobiOpcodeNeg70Response

### HistoryLog
Requests:
- [x] NonexistentHistoryLogStreamRequest

Responses:
- [x] AlarmActivatedHistoryLog
- [x] AlertActivatedHistoryLog
- [x] BGHistoryLog
- [x] BasalDeliveryHistoryLog
- [x] BasalRateChangeHistoryLog
- [x] BolexActivatedHistoryLog
- [x] BolexCompletedHistoryLog
- [x] BolusActivatedHistoryLog
- [x] BolusCompletedHistoryLog
- [x] BolusDeliveryHistoryLog
- [x] BolusRequestedMsg1HistoryLog
- [x] BolusRequestedMsg2HistoryLog
- [x] BolusRequestedMsg3HistoryLog
- [x] CGMHistoryLog
- [x] CannulaFilledHistoryLog
- [x] CarbEnteredHistoryLog
- [x] CartridgeFilledHistoryLog
- [x] CgmCalibrationGxHistoryLog
- [x] CgmCalibrationHistoryLog
- [x] CgmDataGxHistoryLog
- [x] CgmDataSampleHistoryLog
- [x] ControlIQPcmChangeHistoryLog
- [x] ControlIQUserModeChangeHistoryLog
- [x] CorrectionDeclinedHistoryLog
- [x] DailyBasalHistoryLog
- [x] DataLogCorruptionHistoryLog
- [x] DateChangeHistoryLog
- [x] FactoryResetHistoryLog
- [x] HistoryLog
- [x] HistoryLogParser
- [x] HistoryLogStreamResponse
- [x] HypoMinimizerResumeHistoryLog
- [x] HypoMinimizerSuspendHistoryLog
- [x] IdpActionHistoryLog
- [x] IdpActionMsg2HistoryLog
- [x] IdpBolusHistoryLog
- [x] IdpListHistoryLog
- [x] IdpTimeDependentSegmentHistoryLog
- [x] LogErasedHistoryLog
- [x] NewDayHistoryLog
- [x] ParamChangeGlobalSettingsHistoryLog
- [x] ParamChangePumpSettingsHistoryLog
- [x] ParamChangeRemSettingsHistoryLog
- [x] ParamChangeReminderHistoryLog
- [x] PumpingResumedHistoryLog
- [x] PumpingSuspendedHistoryLog
- [x] TempRateActivatedHistoryLog
- [x] TempRateCompletedHistoryLog
- [x] TimeChangedHistoryLog
- [x] TubingFilledHistoryLog
- [x] UnknownHistoryLog
- [x] UsbConnectedHistoryLog
- [x] UsbDisconnectedHistoryLog
- [x] UsbEnumeratedHistoryLog

### QualifyingEvent
Responses:
- [x] QualifyingEvent

---

## Pump Driver Implementation Plan (Loop/Trio)

### Current Capabilities Implemented
* **Pump protocol modeling (`Sources/TandemCore`)** – The repository already defines a large catalog of Tandem request/response message types and a registry for mapping opcodes, sizes, signing requirements, and supported devices. Paired builders cover HKDF/HMAC utilities, JPake scaffolding, and pairing code normalization so the core message layer is ready for reuse.
* **BLE transport primitives (`Sources/TandemBLE`)** – There is an operational Bluetooth stack including a `BluetoothManager` with scanning/reconnect logic, a `PeripheralManager` that applies the Tandem service/characteristic configuration, packetization/HMAC/CRC helpers, and wrappers for assembling/disassembling Tron packets. These pieces mirror the OmniBLE architecture and can drive a pump once higher-level orchestration is added.
* **Utility surface area** – `PumpStateSupplier` centralizes pairing-code/secret management and gating for insulin-affecting actions, while the command-line target (`Sources/TandemCLI`) already exposes decode/encode/list tooling to exercise message serialization during development.
* **Existing validation** – Unit tests cover message metadata, pairing-code validation, and JPake builder behavior, providing an initial safety net that should be expanded as higher layers are implemented.

### Gaps Blocking a Functional Loop/Trio Pump Driver
* **LoopKit/Trio integration stubs** – `TandemPumpManager`, `TandemPumpManagerState`, and even the `LoopKit` target are placeholders. No real `PumpManager` conformance, state persistence, delegate wiring, or dosing interfaces exist, so neither Loop nor Trio can surface the driver yet.
* **Pump session orchestration is incomplete** – `TandemPump` currently redefines lightweight stand-ins for the Bluetooth stack and leaves connection workflows, default startup requests, and message transmission unimplemented. `PumpMessageTransport` is only a protocol, and `PumpComm` lacks actual send/response handling, so the higher-level logic cannot yet talk to the pump over BLE.
* **Authentication gaps** – The JPake flow is scaffolded but relies on optional dependencies and still throws for the v2 (6-digit PIN) handshake path. Pump state persistence does not capture derived secrets/nonces, and `PumpStateSupplier` is not yet fed by the manager lifecycle.
* **Response decoding and device targeting** – BLE notifications are currently reduced to raw payloads, and `SupportedDevices` omits newer hardware such as Trio. Without typed decoding, Loop/Trio cannot react to reservoir, CGM, or alarm updates.
* **Safety and gating** – Actions that modify insulin delivery rely on manual toggles; there is no persistence or UI for enabling them, nor safeguards for when Loop/Trio initiates therapy commands.

### Proposed Roadmap
1. **Phase 0 – Environment & dependency alignment**
   * Ensure Carthage frameworks (LoopKit, etc.) build locally; replace the `LoopKit` stub with the actual dependency surfaces or modular shims required for Linux testing.
   * Document and script any additional SwiftECC/BigInt/CryptoKit requirements so the JPake path builds in CI.

2. **Phase 1 – Transport consolidation**
   * Refactor `TandemPump` to reuse the real `BluetoothManager`/`PeripheralManager` from `TandemBLE` instead of placeholder types, wiring delegate callbacks for connection readiness and configuration completion.
   * Implement a concrete `PumpMessageTransport` backed by `PeripheralManager.sendMessagePackets`, including creation of `TronMessageWrapper`s and routing responses through `BTResponseParser`.
   * Finish `PumpComm.sendMessage` so it handles pump faults, retries, and message-type dispatch using the `MessageRegistry` metadata.

3. **Phase 2 – Authentication and pairing**
   * Complete `PumpChallengeRequestBuilder.createV2` to cover the JPake/short-PIN handshake used by newer firmware and Trio hardware, and persist resulting derived secrets/nonces into `PumpState`.
   * Extend `PumpCommSession.pair` to store authentication artifacts via `PumpStateSupplier` and surface errors meaningfully to the manager delegate.
   * Add persistence for pairing details inside `TandemPumpManagerState.rawValue` so Loop/Trio can survive restarts without re-pairing.

4. **Phase 3 – Pump session lifecycle**
   * Flesh out `TandemPump` connection workflows (scanning filters, auto-reconnect, startup message sequence) and bridge received notifications back into `PumpComm`.
   * Implement message dispatchers for key status/control requests (basal status, bolus initiation, history streams) using the generated message types, and enrich `BTResponseParser` to instantiate concrete response models instead of raw payloads.
   * Add support for identifying pump models (t:slim X2, Mobi, Trio) via BLE advertisement or version responses and update `SupportedDevices`/`MessageProps` accordingly.

5. **Phase 4 – LoopKit/Trio integration**
   * Replace the placeholder protocols with real LoopKit imports and conform `TandemPumpManager` to the pump manager APIs expected by Loop and Trio (state machine, status reporting, delivery limits, dosing delegates).
   * Implement `TandemPumpManagerState` serialization/deserialization, ensuring pairing info, therapy settings, and pump status persist across launches.
   * Surface pump data (reservoir, battery, IOB, alerts) through LoopKit data structures and implement command pathways (bolus, suspend/resume, temp basal) gated by the existing message set.

6. **Phase 5 – Trio-specific validation**
   * Confirm message compatibility with Trio hardware/firmware, updating opcodes or parsers where Trio deviates (e.g., Control-IQ variants, CGM sessions).
   * Add targeted tests/fixtures for Trio logs and status responses, ensuring the driver negotiates the correct API version and pairing code path.

7. **Phase 6 – Safety, tooling, and QA**
   * Provide user-facing controls or configuration surfaces for insulin-affecting toggles managed by `PumpStateSupplier`, including persistence and audit logging.
   * Expand unit and integration tests to cover BLE packetization, authentication failure handling, and critical therapy commands; automate end-to-end smoke tests via `tandemkit-cli` where possible.
   * Document manual validation steps for hardware testing (pairing, bolus, suspend/resume), and capture known limitations or required pump firmware versions before releasing to Loop/Trio users.

This roadmap keeps the existing protocol/BLE groundwork intact while layering the missing pump-manager functionality required for a production Loop or Trio integration.
